/*
 * Selectasaur - Customize the target for a <select> tag

 * Copyright (c) 2012 Kyle Truscott
 *
 * http://keighl.github.com/selectasaur
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(e){"use strict";var t={init:function(n){return e(this).each(function(){var r=e(this),i=r.find(":selected:first"),s={enabled_class:"selectasaur-enabled",wrapper_class:"selectasaur-wrapper",wrapper_active_class:"selectasaur-wrapper-active",wrapper_focus_class:"selectasaur-wrapper-focus",wrapper_hover_class:"selectasaur-wrapper-hover",label_class:"selectasaur-label",change:t.callbacks.change,focus:t.callbacks.focus,blur:t.callbacks.blur,mousedown:t.callbacks.mousedown,mouseup:t.callbacks.mouseup,mouseenter:t.callbacks.mouseenter,mouseleave:t.callbacks.mouseleave,keyup:t.callbacks.keyup},o=e("<div />").addClass(s.wrapper_class),u=e("<span />").addClass(s.label_class);n&&e.extend(s,n),r.data("selectasaur",s),r.addClass(s.enabled_class),i.length===0&&(i=r.find("option:first")),u.html(i.html()),r.css("opacity",0),r.wrap(o),r.before(u),o=r.parent("div"),u=r.siblings("span"),r.bind({"change.selectasaur":function(){u.text(r.find(":selected").html()),o.removeClass(s.wrapper_focus_class),o.removeClass(s.wrapper_hover_class),o.removeClass(s.wrapper_active_class),s.change.call(r)},"focus.selectasaur":function(){o.addClass(s.wrapper_focus_class),s.focus.call(r)},"blur.selectasaur":function(){o.removeClass(s.wrapper_focus_class),o.removeClass(s.wrapper_active_class),s.blur.call(r)},"mousedown.selectasaur touchbegin.selectasaur":function(){o.addClass(s.wrapper_active_class),s.mousedown.call(r)},"mouseup.selectasaur touchend.selectasaur":function(){o.removeClass(s.wrapper_active_class),s.mouseup.call(r)},"click.selectasaur touchend.selectasaur":function(){o.removeClass(s.wrapper_active_class),s.click.call(r)},"mouseenter.selectasaur":function(){o.addClass(s.wrapper_hover_class),s.mouseenter.call(r)},"mouseleave.selectasaur":function(){o.removeClass(s.wrapper_hover_class),s.mouseleave.call(r)},"keyup.selectasaur":function(){u.text(r.find(":selected").html()),s.keyup.call(r)}})})},destroy:function(){return e(this).each(function(){var t=e(this),n=t.parent("div"),r=t.data("selectasaur");if(!r)return!1;t.data("selectasaur",null),t.unbind(".selectasaur"),t.css("opacity",1),n.after(t),n.remove(),t.removeClass(r.enabled_class)})},callbacks:{change:function(){},focus:function(){},blur:function(){},mousedown:function(){},mouseup:function(){},mouseenter:function(){},mouseleave:function(){},keyup:function(){}}};e.fn.selectasaur=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.selectasaur!")}})(jQuery);